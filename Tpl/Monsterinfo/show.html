<!DOCTYPE html>
<html>
 <head>
 <include file="default:head" />
 <load href="__CSS__/monster.css" />
 </head>
 <body>
	<include file="default:headtool" />
	<include file="searchbar" />
    <div class="content">
	共找到 {$monsters|count} 个符合的精灵。
    <volist name="monsters" id="data">
    <h3>精灵 {$data.DefName} 的资料：</h2>
    <h4>{$data.intro} <if condition="($data.isClose eq 1)"><!-- 已下架/已绝版 --></if></h3>
    <ul>
<!--    <li>NumbersID: {$data.NumbersID} (不同种类精灵不可重复)</li>  -->
    <li>ID: {$data.ID} <!-- (精灵的形态ID，不同形态精灵ID不可重复) --></li>
    <li>属性: {$data.Type|getTypeName}</li>
    <neq name="data.EvolvesFrom" value="0"><li>上一形态:  <a href="__ACTION__/id/{$data.EvolvesFrom}">{$data.EvolvesFrom}.{$data['EvolvesFrom']|getPetName}</a></li></neq>
    <neq name="data.EvolvesTo" value="0"><li>下一形态:  <a href="__ACTION__/id/{$data.EvolvesTo}">{$data.EvolvesTo}.{$data['EvolvesTo']|getPetName}</a></li></neq>
    <li>特性: {$data.Features} </li><!--{$data.FeaturesID}-->
    <li>成长类型: <switch name="data.GrowthType" >
 <case value="1" break="1">A</case>
 <case value="2" break="1">B</case>
 <case value="3" break="1">C</case>
 <case value="4" break="1">D</case>
 <case value="5" break="1">E</case>
 <default />未知{$data.Type}
 </switch>类</li>
    <li>星级: <php>echo str_repeat('★',$data['StarLv']); </php>
    <li>基础值：
    体力{$data.HP} 物攻{$data.Atk} 物防{$data.Def} 特攻{$data.SpAtk} 特防{$data.SpDef} 速度{$data.Spd}
    </li>
    <li>极限值：
    体力{$data['HP']*2+294} 物攻{$data['Atk']*2+294} 物防{$data['Def']*2+294} 特攻{$data['SpAtk']*2+294} 特防{$data['SpDef']*2+294} 速度{$data['Spd']*2+294}
    </li>
    <neq name="data.Foundin" value="">
    <li>获取方式：{$data.Foundin}</li>
    </neq>
    <neq name="data.chara" value="">
    <li>推荐性格：{$data.chara}</li>
     </neq>
    <neq name="data.recommendQuality" value="">
    <li>推荐加点：{$data.recommendQuality}</li>
    </neq>
    <neq name="data.recommendSkill" value="">
    <li>推荐技能：{$data.recommendSkill}</li>
    </neq>
    <li>禁止放生: {$data['FreeForbidden']?'是':'否'}</if></li>
    <li>可否骑乘: {$data['ride']?'是':'否'}</li>
<!--    < li>经验值系数: {$data.YieldingExp} 学习力值: {$data.YieldingEV}</li> -->
    <li>捕获成功概率: {$data.CatchRate}%</li>
    <li>身高: <php>echo str_replace(' ','~',$data['Height']);</php> cm 体重: <php>echo str_replace(' ','~',$data['Weight']);</php> kg</li>
    <li>雌雄比例: <php>echo str_replace(' ',':',$data['Gender']);</php></li>
    <gt name="data.use_num" value="0">
    <li>同时携带限制:  {$data.use_num}只</li>
    </gt>
    <li>技能表：
    <table border="1">
        <thead>
			<th>学习等级</th>
			<!--<th>ID</th>-->
			<th>名称</th>
			<th>类别</th>
			<th>属性</th>
			<th>威力</th>
			<th>命中率</th>
			<th>怒气</th>
			<th>描述</th>
		</thead>
        <tbody>
		   <php>$moves = json_decode($data['move'], true);</php>
           <volist name="moves" id="move">
		   <php>$skillInfo = getSkillInfo($move['ID']);</php>
           <tr>	
				<th><if condition="$move.LearningLv egt 100"><a href="__ROOT__/hidemove/show/id/{$move.ID}">隐藏技能</a><else/>{$move.LearningLv}</if></th>
				<!--<th>{$move.ID}</th>-->
				<th>{$skillInfo.Name}</th>
				<th>{$skillInfo.Category|getSkillCategoryName}</th>
				<th>{$skillInfo.Type|getTypeName}</th>
				<th>{$skillInfo.Power}</th>
				<th>{$skillInfo.Accuracy}%</th>
				<th>{$skillInfo.Anger}</th>
				<th>{$skillInfo.Tips}</th>
				</tr>
           </volist>
        </tbody>
    </table>
    </li>
    </ul>
    <hr />
    </volist>
	<include file="default:footer" />

</body>
</html>
<php>
function getPetName($id)
    {
        $monster = M('monster');
        $name = $monster->where("`ID`='$id'")->limit(1)->getField('DefName');
        return $name;
    }
function getTypeName($id)
    {
		switch ($id)
		{
			case 1: return '普通';
			case 2: return '草';
			case 3: return '水';
			case 4: return '火';
			case 5: return '风';
			case 6: return '虫';
			case 7: return '飞行';
			case 8: return '电';
			case 9: return '地面';
			case 10: return '冰';
			case 11: return '超能';
			case 12: return '光';
			case 13: return '暗影';
			case 14: return '战斗';
			case 15: return '龙';
			case 16: return '沙漠';
			case 17: return '神秘';
			case 18: return '特质';
			case 19: return '基佬王';
			case 20: return '上古';
			case 21: return '圣灵';
			default: return '未知';
		}
		return 'undefined';;
    }
function getSkillCategoryName($id)
    {
		switch ($id)
		{
			case 1: return '物理';
			case 2: return '特殊';
			case 4: return '属性';
			case 80: return '必杀';
			default: return '隐藏必杀';
		}
		return 'undefined';;
    }
function getSkillInfo($id)
    {
        $move = M('move');
        $info = $move->where("`ID`='$id'")->limit(1)->select();
        return $info[0];
    }
</php>